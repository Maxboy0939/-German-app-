<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Menschen A1.1</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap');

        :root {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0f;
            --liquid-bg: rgba(255,255,255,0.08);
            --liquid-bg-heavy: rgba(255,255,255,0.12);
            --liquid-border: rgba(255,255,255,0.18);
            --liquid-border-light: rgba(255,255,255,0.1);
            --liquid-inner-shadow: inset 0 1px 1px rgba(255,255,255,0.15);
            --liquid-outer-shadow: 0 8px 40px rgba(0,0,0,0.4), 0 2px 8px rgba(0,0,0,0.3);
            --liquid-outer-shadow-lg: 0 16px 64px rgba(0,0,0,0.5), 0 4px 16px rgba(0,0,0,0.3);
            --liquid-blur: blur(60px) saturate(200%);
            --liquid-blur-sm: blur(40px) saturate(180%);
            --liquid-refraction: linear-gradient(165deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 25%, transparent 50%, rgba(255,255,255,0.03) 75%, rgba(255,255,255,0.1) 100%);
            --liquid-caustic: radial-gradient(ellipse at 30% 20%, rgba(255,255,255,0.12) 0%, transparent 50%);
            --text-primary: #ffffff;
            --text-secondary: rgba(255,255,255,0.6);
            --text-tertiary: rgba(255,255,255,0.35);
            --accent-blue: #0a84ff;
            --accent-purple: #bf5af2;
            --accent-indigo: #5856d6;
            --gold: #ffd60a;
            --green: #30d158;
            --red: #ff453a;
            --orange: #ff9f0a;
            --header-gradient: linear-gradient(145deg, rgba(88,86,214,0.85), rgba(175,82,222,0.75), rgba(10,132,255,0.65));
        }

        .light-mode {
            --bg-primary: #f2f1f6;
            --liquid-bg: rgba(255,255,255,0.65);
            --liquid-bg-heavy: rgba(255,255,255,0.8);
            --liquid-border: rgba(255,255,255,0.85);
            --liquid-border-light: rgba(255,255,255,0.6);
            --text-primary: #1c1c1e;
            --text-secondary: rgba(0,0,0,0.5);
            --text-tertiary: rgba(0,0,0,0.25);
        }

        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            user-select: none;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 90px;
        }

        .app-container { max-width:480px; margin:0 auto; padding:8px; min-height:100vh; position:relative; z-index:1; }

        .liquid-glass {
            background:var(--liquid-bg);
            border:1px solid var(--liquid-border); border-radius:22px;
            box-shadow:var(--liquid-outer-shadow),var(--liquid-inner-shadow);
            position:relative; overflow:hidden;
        }

        .liquid-glass-lg {
            background:var(--liquid-bg-heavy);
            border:1.5px solid var(--liquid-border); border-radius:28px;
            box-shadow:var(--liquid-outer-shadow-lg),var(--liquid-inner-shadow);
            position:relative; overflow:hidden;
        }

        .header {
            text-align:center; padding:30px 20px 24px;
            background:var(--header-gradient); border-radius:28px;
            margin-bottom:10px; position:relative; overflow:hidden;
            box-shadow:0 16px 56px rgba(88,86,214,0.35);
        }
        .header h1 { font-size:1.4em; font-weight:800; color:white; }
        .header p { font-size:0.78em; opacity:0.85; margin-top:4px; color:white; }

        .bottom-nav {
            position: fixed; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 100%; max-width: 480px; z-index: 100;
            padding: 6px 8px; padding-bottom: max(6px, env(safe-area-inset-bottom));
            background: var(--liquid-bg-heavy);
            border-top: 1px solid var(--liquid-border);
            box-shadow: 0 -4px 30px rgba(0,0,0,0.3); display: flex; gap: 2px;
        }

        .tab-btn {
            flex: 1; display: flex; flex-direction: column; align-items: center; gap: 3px;
            padding: 8px 4px 6px; background: none; border: none; color: var(--text-tertiary);
            font-family: inherit; font-size: 0.6em; font-weight: 600; cursor: pointer;
            border-radius: 14px;
        }
        .tab-btn .tab-icon { font-size: 1.9em; }
        .tab-btn.active { color: var(--accent-indigo); }

        .score-bar { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; margin-bottom:10px; }
        .score-card { padding:14px 6px; text-align:center; }
        .score-card .number { font-size:1.5em; font-weight:800; background:linear-gradient(135deg,var(--gold),var(--orange)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .score-card .label { font-size:0.6em; color:var(--text-secondary); margin-top:3px; font-weight:500; }
        .level-badge { display:inline-block; background:var(--header-gradient); padding:4px 12px; border-radius:20px; font-size:0.63em; font-weight:700; color:white; -webkit-text-fill-color:white; }

        .tab-page { display:none; }
        .tab-page.active { display:block; }

        .lektion-list { display:flex; flex-direction:column; gap:8px; }
        .lektion-btn { padding:15px 16px; color:var(--text-primary); cursor:pointer; display:flex; align-items:center; gap:14px; }
        .lektion-btn .icon { font-size:1.9em; width:48px; height:48px; display:flex; align-items:center; justify-content:center; background:rgba(88,86,214,0.12); border:1px solid rgba(88,86,214,0.15); border-radius:14px; flex-shrink:0; }
        .lektion-btn .info { text-align:right; flex:1; }
        .lektion-btn .info .title { font-weight:700; font-size:0.9em; }
        .lektion-btn .info .subtitle { font-size:0.7em; color:var(--text-secondary); margin-top:2px; }
        .lektion-btn .arrow { font-size:0.85em; color:var(--text-tertiary); }

        .sub-menu { display:none; gap:8px; }
        .sub-menu.show { display:grid; grid-template-columns:1fr 1fr; }
        .sub-btn { padding:28px 10px; color:var(--text-primary); cursor:pointer; text-align:center; }
        .sub-btn .sicon { font-size:2.3em; display:block; margin-bottom:10px; }
        .sub-btn span:last-child { font-weight:600; font-size:0.86em; }

        .content-area { display:none; }
        .content-area.show { display:block; }

        .card { padding:22px 18px; margin-bottom:10px; }
        .card h2 { color:var(--accent-purple); font-size:1em; font-weight:700; margin-bottom:14px; display:flex; align-items:center; gap:8px; }
        .card h3 { color:var(--gold); font-size:0.9em; font-weight:700; margin:16px 0 8px; }
        .card p { line-height:2; font-size:0.85em; }

        .back-btn {
            width:100%; padding:14px; color:var(--text-primary); font-family:inherit; font-size:0.9em; font-weight:600; cursor:pointer; margin:8px 0 14px;
            background:var(--liquid-bg); border:1px solid var(--liquid-border-light); border-radius:18px;
        }

        .next-btn {
            display:none; width:100%; background:var(--header-gradient); border:1px solid rgba(255,255,255,0.15);
            border-radius:18px; padding:16px; color:white; font-family:inherit; font-size:0.98em; font-weight:700;
            cursor:pointer; margin-bottom:12px;
        }
        .next-btn.show { display:block; }

        .word-table { width:100%; border-collapse:collapse; direction:ltr; font-size:0.83em; }
        .word-table th { background:rgba(88,86,214,0.1); padding:10px 8px; text-align:center; font-weight:600; color:var(--accent-indigo); }
        .word-table td { padding:10px 8px; border-bottom:1px solid var(--liquid-border-light); text-align:center; }
        .de { color:var(--accent-blue); font-weight:600; }
        .fa { color:var(--gold); font-weight:500; }

        .grammar-box { background:rgba(88,86,214,0.08); border:1px solid rgba(88,86,214,0.15); border-radius:16px; padding:16px; margin:10px 0; direction:ltr; text-align:left; line-height:2.3; font-size:0.88em; }
        .grammar-box .highlight { color:var(--gold); font-weight:700; }

        .flashcard {
            background:linear-gradient(160deg,rgba(88,86,214,0.2),rgba(175,82,222,0.12));
            border:1px solid rgba(88,86,214,0.25); border-radius:28px; padding:46px 20px; text-align:center;
            margin-bottom:12px; min-height:190px; display:flex; flex-direction:column; justify-content:center; cursor:pointer;
        }
        .flashcard .word { font-size:2.2em; font-weight:800; direction:ltr; }
        .flashcard .meaning { font-size:1.3em; color:var(--gold); font-weight:600; display:none; margin-top:12px; }
        .flashcard .tap-hint { font-size:0.7em; color:var(--text-secondary); margin-top:16px; }

        .fc-nav { display:flex; gap:8px; margin-bottom:12px; }
        .fc-nav button { flex:1; padding:13px; border-radius:16px; border:1px solid var(--liquid-border-light); background:var(--liquid-bg); color:var(--text-primary); font-family:inherit; font-size:0.9em; font-weight:600; cursor:pointer; }
        .fc-counter { text-align:center; color:var(--text-secondary); margin-bottom:10px; font-size:0.8em; }

        .quiz-area { display:none; }
        .question-card { padding:22px 18px; margin-bottom:12px; }
        .question-number { font-size:0.73em; color:var(--accent-purple); font-weight:600; margin-bottom:10px; }
        .question-text { font-size:0.93em; line-height:1.8; font-weight:500; }
        .question-hint { font-size:0.78em; color:var(--gold); font-weight:500; margin-top:6px; }
        .question-sentence { font-size:1.1em; direction:ltr; text-align:left; background:rgba(0,0,0,0.12); padding:16px; border-radius:18px; margin:14px 0; line-height:2; font-weight:600; border:1px solid rgba(255,255,255,0.06); }
        .blank { color:var(--gold); border-bottom:2px dashed var(--gold); padding:2px 10px; }
        .options { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-bottom:12px; }

        .option-btn {
            background:var(--liquid-bg); border:1.5px solid var(--liquid-border-light); border-radius:18px; padding:14px;
            color:var(--text-primary); font-family:inherit; font-size:0.93em; font-weight:600; cursor:pointer;
            direction:ltr; text-align:center;
        }
        .option-btn.correct { background:rgba(48,209,88,0.12); border-color:var(--green); color:var(--green); }
        .option-btn.wrong { background:rgba(255,69,58,0.12); border-color:var(--red); color:var(--red); }
        .option-btn:disabled { opacity:0.3; }

        .explanation { display:none; background:rgba(88,86,214,0.08); border:1px solid rgba(88,86,214,0.15); border-radius:18px; padding:16px; margin-bottom:12px; font-size:0.84em; line-height:1.9; }
        .explanation.show { display:block; }

        .progress-bar { width:100%; height:5px; background:var(--liquid-bg); border-radius:3px; margin-bottom:14px; overflow:hidden; }
        .progress-fill { height:100%; background:var(--header-gradient); border-radius:3px; transition:width 0.6s; }

        .result-card { display:none; text-align:center; padding:44px 20px; }
        .result-card .emoji { font-size:4.5em; margin-bottom:16px; }
        .result-card h2 { font-size:1.4em; font-weight:800; }
        .result-card .result-score { font-size:2.8em; background:linear-gradient(135deg,var(--gold),var(--orange)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; font-weight:800; margin:16px 0; }
        .result-card p { color:var(--text-secondary); margin-bottom:24px; }

        .google-btn {
            width:100%; padding:16px; border-radius:18px; border:1px solid var(--liquid-border);
            background:var(--liquid-bg); color:var(--text-primary); font-family:inherit; font-size:0.95em; font-weight:700;
            cursor:pointer; display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:12px;
        }
        .google-btn img { width:24px; height:24px; }

        .signout-btn {
            width:100%; padding:14px; border-radius:16px;
            background:rgba(255,69,58,0.1); border:1px solid rgba(255,69,58,0.2);
            color:var(--red); font-family:inherit; font-size:0.88em; font-weight:600; cursor:pointer; margin-top:12px;
        }

        .profile-card { padding:30px 20px; text-align:center; margin-bottom:10px; }
        .profile-avatar-lg {
            width:90px; height:90px; border-radius:50%; display:flex; align-items:center; justify-content:center;
            margin:0 auto 14px; border:3px solid rgba(255,255,255,0.2); overflow:hidden; background:var(--header-gradient);
        }
        .profile-avatar-lg img { width:100%; height:100%; object-fit:cover; }
        .profile-avatar-lg .avatar-letter { font-size:2.5em; color:white; font-weight:800; }
        .profile-name-lg { font-size:1.3em; font-weight:800; }
        .profile-email { font-size:0.75em; color:var(--text-secondary); margin-top:4px; }
        .profile-stats { display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; margin-bottom:10px; }
        .profile-stat { padding:18px 8px; text-align:center; }
        .profile-stat .sv { font-size:1.5em; font-weight:800; background:linear-gradient(135deg,var(--accent-blue),var(--accent-purple)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .profile-stat .sl { font-size:0.6em; color:var(--text-secondary); margin-top:4px; }

        .lb-header { text-align:center; padding:24px 16px; margin-bottom:12px; }
        .lb-title { font-size:1.3em; font-weight:800; background:linear-gradient(135deg,var(--gold),var(--orange)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
        .lb-sub { font-size:0.75em; color:var(--text-secondary); margin-top:4px; }
        .online-dot { width:8px;height:8px;border-radius:50%;background:var(--green);display:inline-block;margin-right:4px; }
        .podium { display:flex; align-items:flex-end; justify-content:center; gap:6px; margin-bottom:14px; padding:10px 0; }
        .podium-item { text-align:center; }
        .podium-item.first { order:2; }
        .podium-item.second { order:1; }
        .podium-item.third { order:3; }
        .podium-avatar { width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.4em;margin:0 auto 6px;position:relative;overflow:hidden; }
        .podium-avatar img { width:100%;height:100%;object-fit:cover; }
        .podium-item.first .podium-avatar { width:68px;height:68px;background:linear-gradient(145deg,#ffd60a,#ff9f0a);border:2px solid rgba(255,255,255,0.3); }
        .podium-item.second .podium-avatar { background:linear-gradient(145deg,#c0c0c0,#a0a0a0); }
        .podium-item.third .podium-avatar { background:linear-gradient(145deg,#cd7f32,#b5651d); }
        .podium-medal { position:absolute;bottom:-4px;right:-4px;font-size:0.7em;background:rgba(0,0,0,0.5);border-radius:50%;width:22px;height:22px;display:flex;align-items:center;justify-content:center; }
        .podium-name { font-size:0.7em; font-weight:700; }
        .podium-score-text { font-size:0.6em; color:var(--gold); font-weight:700; }
        .podium-bar { width:78px;border-radius:12px 12px 0 0;margin-top:8px;position:relative; }
        .podium-item.first .podium-bar { height:85px;background:rgba(255,214,10,0.15);border:1px solid rgba(255,214,10,0.2); }
        .podium-item.second .podium-bar { height:62px;background:rgba(192,192,192,0.1);border:1px solid rgba(192,192,192,0.15); }
        .podium-item.third .podium-bar { height:42px;background:rgba(205,127,50,0.1);border:1px solid rgba(205,127,50,0.15); }
        .podium-bar .podium-rank { position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.5em;font-weight:900;opacity:0.15; }
        .lb-list { margin-bottom:12px; }
        .lb-item { display:flex; align-items:center; gap:12px; padding:14px 16px; border-bottom:1px solid var(--liquid-border-light); }
        .lb-item.is-me { background:rgba(88,86,214,0.08); border:1px solid rgba(88,86,214,0.15); border-radius:16px; }
        .lb-rank { width:28px; font-size:0.85em; font-weight:800; text-align:center; }
        .lb-avatar-sm { width:42px;height:42px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2em;border:1.5px solid var(--liquid-border-light);overflow:hidden;background:rgba(88,86,214,0.12); }
        .lb-avatar-sm img { width:100%;height:100%;object-fit:cover; }
        .lb-info { flex:1; }
        .lb-name { font-size:0.86em; font-weight:700; }
        .lb-name .me-badge { font-size:0.6em;background:var(--header-gradient);color:white;padding:2px 8px;border-radius:8px;margin-right:6px; }
        .lb-details { font-size:0.66em; color:var(--text-secondary); margin-top:2px; }
        .lb-score { text-align:left; }
        .lb-score-val { font-size:1.05em; font-weight:800; color:var(--gold); }
        .lb-score-label { font-size:0.56em; color:var(--text-tertiary); }
        .loading-spinner { text-align:center; padding:40px; }
        .loading-spinner p { font-size:0.82em; color:var(--text-secondary); margin-top:10px; }
        .auth-prompt { text-align:center; padding:40px 20px; }
        .auth-prompt .auth-icon { font-size:4em; margin-bottom:16px; }
        .auth-prompt p { font-size:0.88em; color:var(--text-secondary); line-height:1.8; margin-bottom:20px; }
        .settings-group { padding:6px 0; margin-bottom:10px; }
        .settings-group-title { font-size:0.72em; color:var(--text-secondary); font-weight:600; padding:0 18px 8px; }
        .setting-item { display:flex; align-items:center; justify-content:space-between; padding:14px 18px; cursor:pointer; }
        .setting-item:not(:last-child) { border-bottom:1px solid var(--liquid-border-light); }
        .setting-item .setting-left { display:flex; align-items:center; gap:12px; }
        .setting-item .setting-icon { width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1em; }
        .setting-icon.purple { background:rgba(175,82,222,0.15); }
        .setting-icon.green { background:rgba(48,209,88,0.15); }
        .setting-icon.red { background:rgba(255,69,58,0.15); }
        .setting-icon.orange { background:rgba(255,159,10,0.15); }
        .setting-icon.teal { background:rgba(106,196,220,0.15); }
        .setting-item .setting-label { font-size:0.86em; font-weight:500; }
        .setting-item .setting-right { color:var(--text-tertiary); font-size:0.83em; }
        .toggle-switch { width:48px;height:28px;border-radius:14px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.15);position:relative;cursor:pointer; }
        .toggle-switch.active { background:var(--green);border-color:var(--green); }
        .toggle-switch::after { content:'';width:22px;height:22px;border-radius:50%;background:white;position:absolute;top:2px;right:2px;transition:all 0.3s; }
        .toggle-switch.active::after { right:calc(100% - 24px); }
        .toast { position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--liquid-bg-heavy);border:1px solid var(--liquid-border);border-radius:16px;padding:14px 24px;color:var(--text-primary);font-family:inherit;font-size:0.85em;font-weight:600;z-index:1000;transition:transform 0.5s; }
        .toast.show { transform:translateX(-50%) translateY(0); }
    </style>
</head>
<body>
<div class="toast" id="toast"></div>
<div class="app-container">
    <div class="header"><h1 id="headerTitle">ğŸ“š Menschen A1.1</h1><p id="headerSub">Ø¢Ù…ÙˆØ²Ø´ Ø²Ø¨Ø§Ù† Ø¢Ù„Ù…Ø§Ù†ÛŒ - Ø³Ø·Ø­ A1</p></div>

    <div class="tab-page active" id="pageHome">
        <div class="score-bar">
            <div class="score-card liquid-glass"><div class="number" id="totalScore">0</div><div class="label">Ø§Ù…ØªÛŒØ§Ø²</div></div>
            <div class="score-card liquid-glass"><div class="number" id="streak">0</div><div class="label">ğŸ”¥ Ù¾Ø´Øªâ€ŒØ³Ø±Ù‡Ù…</div></div>
            <div class="score-card liquid-glass"><div class="number"><span class="level-badge" id="levelBadge">Ù…Ø¨ØªØ¯ÛŒ</span></div><div class="label">Ø³Ø·Ø­</div></div>
        </div>
        <div id="mainMenu"><div class="lektion-list" id="lektionList"></div></div>
        <div class="sub-menu" id="subMenu">
            <div class="sub-btn liquid-glass" onclick="showSection('words')"><span class="sicon">ğŸ“</span><span>ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§</span></div>
            <div class="sub-btn liquid-glass" onclick="showSection('grammar')"><span class="sicon">ğŸ“–</span><span>Ú¯Ø±Ø§Ù…Ø±</span></div>
            <div class="sub-btn liquid-glass" onclick="showSection('lesson')"><span class="sicon">ğŸ“‹</span><span>Ø¯Ø±Ø³</span></div>
            <div class="sub-btn liquid-glass" onclick="showSection('exercise')"><span class="sicon">âœï¸</span><span>ØªÙ…Ø±ÛŒÙ†</span></div>
        </div>
        <button class="back-btn" id="subMenuBack" style="display:none" onclick="goHome()">ğŸ  Ø¨Ø§Ø²Ú¯Ø´Øª</button>
        <div class="content-area" id="wordsArea"></div>
        <div class="content-area" id="grammarArea"></div>
        <div class="content-area" id="lessonArea"></div>
        <div class="quiz-area" id="quizArea">
            <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
            <div class="question-card liquid-glass-lg"><div class="question-number" id="questionNumber"></div><div class="question-text" id="questionText"></div><div class="question-hint" id="questionHint"></div><div class="question-sentence" id="questionSentence"></div></div>
            <div class="options" id="optionsContainer"></div>
            <div class="explanation" id="explanation"></div>
            <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Ø³Ø¤Ø§Ù„ Ø¨Ø¹Ø¯ÛŒ â¡ï¸</button>
            <button class="back-btn" onclick="backToSubMenu()">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>
        </div>
        <div class="result-card liquid-glass-lg" id="resultCard">
            <div class="emoji" id="resultEmoji"></div>
            <h2 id="resultTitle"></h2>
            <div class="result-score" id="resultScore"></div>
            <p id="resultText"></p>
            <button class="next-btn show" onclick="backToSubMenu()" style="display:block">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¯Ø±Ø³</button>
            <button class="back-btn" onclick="goHome()">ğŸ  Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ</button>
        </div>
    </div>

    <div class="tab-page" id="pageLeaderboard">
        <div class="lb-header liquid-glass-lg"><div class="lb-title">ğŸ† ØªØ§Ø¨Ù„Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ø§Øª</div><div class="lb-sub"><span class="online-dot"></span><span id="onlineCount">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span></div></div>
        <div id="podiumArea"></div>
        <div class="lb-list liquid-glass-lg" id="lbList"><div class="loading-spinner"><p>â³ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p></div></div>
    </div>

    <div class="tab-page" id="pageProfile">
        <div id="authPrompt"><div class="auth-prompt liquid-glass-lg"><div class="auth-icon">ğŸ”</div><p>Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø§Ù…ØªÛŒØ§Ø² Ùˆ Ø±Ù‚Ø§Ø¨Øª Ø¢Ù†Ù„Ø§ÛŒÙ†<br>Ø¨Ø§ Ø­Ø³Ø§Ø¨ Ú¯ÙˆÚ¯Ù„ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</p><button class="google-btn" onclick="googleSignIn()"><img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google"><span>ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ø­Ø³Ø§Ø¨ Google</span></button></div></div>
        <div id="profileContent" style="display:none">
            <div class="profile-card liquid-glass-lg"><div class="profile-avatar-lg" id="profileAvatar"><span class="avatar-letter">ğŸ‘¤</span></div><div class="profile-name-lg" id="profileName">Ú©Ø§Ø±Ø¨Ø±</div><div class="profile-email" id="profileEmail"></div></div>
            <div class="profile-stats"><div class="profile-stat liquid-glass"><div class="sv" id="pStatScore">0</div><div class="sl">Ø§Ù…ØªÛŒØ§Ø²</div></div><div class="profile-stat liquid-glass"><div class="sv" id="pStatStreak">0</div><div class="sl">ğŸ”¥ Ø§Ø³ØªØ±ÛŒÚ©</div></div><div class="profile-stat liquid-glass"><div class="sv" id="pStatDays">0</div><div class="sl">Ø±ÙˆØ² ÙØ¹Ø§Ù„ÛŒØª</div></div></div>
            <div class="profile-stat liquid-glass" style="padding:18px;text-align:center;margin-bottom:10px"><div class="sv" id="pStatRank">-</div><div class="sl">Ø±ØªØ¨Ù‡ Ø´Ù…Ø§</div></div>
            <button class="signout-btn" onclick="googleSignOut()">ğŸšª Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨</button>
        </div>
    </div>

    <div class="tab-page" id="pageSettings">
        <div class="settings-group liquid-glass-lg"><div class="settings-group-title">Ø¸Ø§Ù‡Ø±ÛŒ</div><div class="setting-item" onclick="toggleTheme()"><div class="setting-left"><div class="setting-icon purple">ğŸ¨</div><span class="setting-label">ØªÙ… ØªØ§Ø±ÛŒÚ© / Ø±ÙˆØ´Ù†</span></div><div class="toggle-switch" id="themeToggle"></div></div></div>
        <div class="settings-group liquid-glass-lg"><div class="settings-group-title">ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</div><div class="setting-item" onclick="toggleHints()"><div class="setting-left"><div class="setting-icon green">ğŸ’¡</div><span class="setting-label">Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ</span></div><div class="toggle-switch active" id="hintToggle"></div></div><div class="setting-item" onclick="toggleAutoNext()"><div class="setting-left"><div class="setting-icon orange">â­ï¸</div><span class="setting-label">Ø±ÙØªÙ† Ø®ÙˆØ¯Ú©Ø§Ø±</span></div><div class="toggle-switch" id="autoNextToggle"></div></div></div>
        <div class="settings-group liquid-glass-lg"><div class="settings-group-title">Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</div><div class="setting-item" onclick="resetProgress()"><div class="setting-left"><div class="setting-icon red">ğŸ—‘ï¸</div><span class="setting-label">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ´Ø±ÙØª</span></div><div class="setting-right">â†</div></div></div>
        <div class="settings-group liquid-glass-lg"><div class="settings-group-title">Ø¯Ø±Ø¨Ø§Ø±Ù‡</div><div class="setting-item"><div class="setting-left"><div class="setting-icon teal">â„¹ï¸</div><span class="setting-label">Ù†Ø³Ø®Ù‡</span></div><div class="setting-right">3.0</div></div><div class="setting-item"><div class="setting-left"><div class="setting-icon purple">ğŸ”—</div><span class="setting-label">Ø§ØªØµØ§Ù„</span></div><div class="setting-right" id="connStatus">Firebase</div></div></div>
    </div>
</div>

<nav class="bottom-nav">
    <button class="tab-btn active" onclick="switchTab('Home',this)"><span class="tab-icon">ğŸ </span><span>Ø®Ø§Ù†Ù‡</span></button>
    <button class="tab-btn" onclick="switchTab('Leaderboard',this)"><span class="tab-icon">ğŸ†</span><span>Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ</span></button>
    <button class="tab-btn" onclick="switchTab('Profile',this)"><span class="tab-icon">ğŸ‘¤</span><span>Ø­Ø³Ø§Ø¨</span></button>
    <button class="tab-btn" onclick="switchTab('Settings',this)"><span class="tab-icon">âš™ï¸</span><span>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</span></button>
</nav>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDZ5Dp5c8wqVQrqPwAob1pM1VPvakGd_W0",
        authDomain: "german-app-e7d9c.firebaseapp.com",
        projectId: "german-app-e7d9c",
        storageBucket: "german-app-e7d9c.firebasestorage.app",
        messagingSenderId: "396305678669",
        appId: "1:396305678669:web:a63130ed963ed93db4f704"
    };

    let db, auth, currentUser = null, firebaseReady = false;
    try { firebase.initializeApp(firebaseConfig); db = firebase.firestore(); auth = firebase.auth(); firebaseReady = true; } catch(e) { console.warn(e); }

    const lektionInfo=[{num:1,icon:"ğŸ“—",title:"Lektion 1",subtitle:"Hallo! Ich bin Nicole"},{num:2,icon:"ğŸ“˜",title:"Lektion 2",subtitle:"Der Familienname ist MÃ¼ller"},{num:3,icon:"ğŸ“™",title:"Lektion 3",subtitle:"Das ist mein Bruder"},{num:4,icon:"ğŸ“•",title:"Lektion 4",subtitle:"Du hast einen Bruder?"},{num:5,icon:"ğŸ“’",title:"Lektion 5",subtitle:"Was ist das?"},{num:6,icon:"ğŸ““",title:"Lektion 6",subtitle:"Das ist kein CafÃ©"},{num:7,icon:"ğŸ“”",title:"Lektion 7",subtitle:"Ich bin Journalistin"},{num:8,icon:"ğŸ“—",title:"Lektion 8",subtitle:"Mein Tag"},{num:9,icon:"ğŸ“˜",title:"Lektion 9",subtitle:"Was mÃ¶chtest du?"},{num:10,icon:"ğŸ“™",title:"Lektion 10",subtitle:"Ich steige ein"},{num:11,icon:"ğŸ“•",title:"Lektion 11",subtitle:"Was hast du gemacht?"},{num:12,icon:"ğŸ“’",title:"Lektion 12",subtitle:"Was ist passiert?"}];

    const L={
    1:{t:"Lektion 1: Hallo!",w:[{d:"Hallo",f:"Ø³Ù„Ø§Ù…"},{d:"Guten Morgen",f:"ØµØ¨Ø­ Ø¨Ø®ÛŒØ±"},{d:"TschÃ¼s",f:"Ø®Ø¯Ø§Ø­Ø§ÙØ¸"},{d:"ich",f:"Ù…Ù†"},{d:"du",f:"ØªÙˆ"},{d:"er",f:"Ø§Ùˆ (Ù…Ø±Ø¯)"},{d:"sie",f:"Ø§Ùˆ (Ø²Ù†)"},{d:"Sie",f:"Ø´Ù…Ø§"},{d:"heiÃŸen",f:"Ù†Ø§Ù… Ø¯Ø§Ø´ØªÙ†"},{d:"kommen",f:"Ø¢Ù…Ø¯Ù†"},{d:"wohnen",f:"Ø²Ù†Ø¯Ú¯ÛŒ Ú©Ø±Ø¯Ù†"},{d:"sprechen",f:"ØµØ­Ø¨Øª Ú©Ø±Ø¯Ù†"},{d:"sein",f:"Ø¨ÙˆØ¯Ù†"},{d:"der Name",f:"Ø§Ø³Ù…"},{d:"Deutschland",f:"Ø¢Ù„Ù…Ø§Ù†"},{d:"Deutsch",f:"Ø¢Ù„Ù…Ø§Ù†ÛŒ"},{d:"Ja",f:"Ø¨Ù„Ù‡"},{d:"Nein",f:"Ù†Ù‡"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û±",s:[{t:"ÙØ¹Ù„ sein",c:"",tb:"ich <span class='highlight'>bin</span>\ndu <span class='highlight'>bist</span>\ner/sie <span class='highlight'>ist</span>\nSie <span class='highlight'>sind</span>",ex:["Ich <b>bin</b> Nicole."]},{t:"ØµØ±Ù ÙØ¹Ù„",c:"",tb:"ich komm<span class='highlight'>e</span>\ndu komm<span class='highlight'>st</span>\ner komm<span class='highlight'>t</span>",ex:["Ich <b>komme</b> aus Iran."]}]},l:{t:"Ø¯Ø±Ø³ Û±",s:[{t:"ğŸ¯ Ù‡Ø¯Ù",c:"â€¢ Ù…Ø¹Ø±ÙÛŒ Ø®ÙˆØ¯\nâ€¢ Ø³Ù„Ø§Ù… Ùˆ Ø®Ø¯Ø§Ø­Ø§ÙØ¸ÛŒ"}]},e:[{s:"Ich ___ Nicole.",o:["bin","bist","ist","sind"],c:0,h:"Ù…Ù† Ù‡Ø³ØªÙ…",x:"ich bin"},{s:"Wie ___ du?",o:["heiÃŸen","heiÃŸt","heiÃŸe","heiÃŸst"],c:1,h:"Ø§Ø³Ù…ØªØŸ",x:"du heiÃŸt"},{s:"Ich ___ aus Iran.",o:["kommt","kommen","kommst","komme"],c:3,h:"",x:"ich komme"},{s:"Er ___ in Berlin.",o:["wohne","wohnst","wohnt","wohnen"],c:2,h:"",x:"er wohnt"},{s:"Du ___ Student.",o:["bin","bist","ist","sind"],c:1,h:"",x:"du bist"}],ge:[{s:"ich ___ (sein)",o:["bin","bist","ist","sind"],c:0,h:"",x:"ich bin"},{s:"du ___ (sein)",o:["bin","bist","ist","sind"],c:1,h:"",x:"du bist"},{s:"er ___ (sein)",o:["bin","bist","ist","sind"],c:2,h:"",x:"er ist"}]},
    2:{t:"Lektion 2",w:[{d:"der Familienname",f:"Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ"},{d:"die Adresse",f:"Ø¢Ø¯Ø±Ø³"},{d:"buchstabieren",f:"Ù‡Ø¬ÛŒ Ú©Ø±Ø¯Ù†"},{d:"langsam",f:"Ø¢Ù‡Ø³ØªÙ‡"},{d:"bitte",f:"Ù„Ø·ÙØ§Ù‹"},{d:"danke",f:"Ù…Ù…Ù†ÙˆÙ†"},{d:"Entschuldigung",f:"Ø¨Ø¨Ø®Ø´ÛŒØ¯"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û²",s:[{t:"Ø§Ø¹Ø¯Ø§Ø¯",c:"",tb:"21=<span class='highlight'>ein</span>und<span class='highlight'>zwanzig</span>\n30=dreiÃŸig\n100=hundert",ex:["25=fÃ¼nfundzwanzig"]}]},l:{t:"Ø¯Ø±Ø³ Û²",s:[{t:"ğŸ¯",c:"â€¢ Ø§Ø¹Ø¯Ø§Ø¯ Û²Û°-Û±Û°Û°"}]},e:[{s:"25 = ___",o:["zweiundfÃ¼nfzig","fÃ¼nfundzwanzig","fÃ¼nfzehn","zwanzig"],c:1,h:"",x:"fÃ¼nfundzwanzig"},{s:"Bitte sprechen Sie ___.",o:["schnell","langsam","laut","gut"],c:1,h:"",x:"langsam"}],ge:[{s:"dreiÃŸig=___",o:["13","30","3","33"],c:1,h:"",x:"30"}]},
    3:{t:"Lektion 3",w:[{d:"die Familie",f:"Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡"},{d:"der Vater",f:"Ù¾Ø¯Ø±"},{d:"die Mutter",f:"Ù…Ø§Ø¯Ø±"},{d:"der Bruder",f:"Ø¨Ø±Ø§Ø¯Ø±"},{d:"die Schwester",f:"Ø®ÙˆØ§Ù‡Ø±"},{d:"verheiratet",f:"Ù…ØªØ£Ù‡Ù„"},{d:"ledig",f:"Ù…Ø¬Ø±Ø¯"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û³",s:[{t:"Ø¶Ù…Ø§ÛŒØ± Ù…Ù„Ú©ÛŒ",c:"",tb:"<span class='highlight'>mein</span> Vater\n<span class='highlight'>meine</span> Mutter",ex:["mein Bruder"]}]},l:{t:"Ø¯Ø±Ø³ Û³",s:[{t:"ğŸ¯",c:"â€¢ Ø®Ø§Ù†ÙˆØ§Ø¯Ù‡"}]},e:[{s:"Das ist ___ Bruder.(Ù…Ù†)",o:["mein","meine","dein","deine"],c:0,h:"Ù…Ø°Ú©Ø±",x:"mein"},{s:"Wie alt ___ du?",o:["bin","bist","ist","sind"],c:1,h:"",x:"bist"}],ge:[{s:"der Vaterâ†’___(Ù…Ù†)",o:["mein","meine","meinen","meinem"],c:0,h:"",x:"mein"}]},
    4:{t:"Lektion 4",w:[{d:"haben",f:"Ø¯Ø§Ø´ØªÙ†"},{d:"der Hund",f:"Ø³Ú¯"},{d:"die Katze",f:"Ú¯Ø±Ø¨Ù‡"},{d:"schÃ¶n",f:"Ø²ÛŒØ¨Ø§"},{d:"ein/eine",f:"ÛŒÚ©"},{d:"kein/keine",f:"Ù‡ÛŒÚ†"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û´",s:[{t:"haben",c:"",tb:"ich <span class='highlight'>habe</span>\ndu <span class='highlight'>hast</span>\ner <span class='highlight'>hat</span>",ex:["Ich habe einen Bruder."]}]},l:{t:"Ø¯Ø±Ø³ Û´",s:[{t:"ğŸ¯",c:"â€¢ haben\nâ€¢ Ø§Ú©ÙˆØ²Ø§ØªÛŒÙˆ"}]},e:[{s:"Ich ___ einen Bruder.",o:["habe","hast","hat","haben"],c:0,h:"",x:"ich habe"},{s:"Ich habe ___ Hund.",o:["ein","eine","einen","einer"],c:2,h:"derâ†’einen",x:"einen"}],ge:[{s:"ich ___(haben)",o:["habe","hast","hat","haben"],c:0,h:"",x:"habe"}]},
    5:{t:"Lektion 5",w:[{d:"der Tisch",f:"Ù…ÛŒØ²"},{d:"die Lampe",f:"Ù„Ø§Ù…Ù¾"},{d:"das Buch",f:"Ú©ØªØ§Ø¨"},{d:"neu",f:"Ù†Ùˆ"},{d:"kaputt",f:"Ø®Ø±Ø§Ø¨"},{d:"teuer",f:"Ú¯Ø±Ø§Ù†"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Ûµ",s:[{t:"Ø¢Ø±ØªÛŒÚ©Ù„",c:"",tb:"<span class='highlight'>der</span> Tisch\n<span class='highlight'>die</span> Lampe\n<span class='highlight'>das</span> Buch",ex:["Der Tisch ist groÃŸ."]}]},l:{t:"Ø¯Ø±Ø³ Ûµ",s:[{t:"ğŸ¯",c:"â€¢ der/die/das"}]},e:[{s:"___ Tisch ist groÃŸ.",o:["Der","Die","Das","Den"],c:0,h:"",x:"Der"},{s:"___ Buch ist gut.",o:["Der","Die","Das","Den"],c:2,h:"",x:"Das"}],ge:[{s:"derâ†’___",o:["ein","eine","einen","einer"],c:0,h:"",x:"ein"}]},
    6:{t:"Lektion 6",w:[{d:"das CafÃ©",f:"Ú©Ø§ÙÙ‡"},{d:"der Supermarkt",f:"Ø³ÙˆÙ¾Ø±Ù…Ø§Ø±Ú©Øª"},{d:"die Bank",f:"Ø¨Ø§Ù†Ú©"},{d:"hier",f:"Ø§ÛŒÙ†Ø¬Ø§"},{d:"dort",f:"Ø¢Ù†Ø¬Ø§"},{d:"links",f:"Ú†Ù¾"},{d:"rechts",f:"Ø±Ø§Ø³Øª"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û¶",s:[{t:"Es gibt",c:"",tb:"Es gibt <span class='highlight'>einen</span> Supermarkt.",ex:["Hier gibt es ein CafÃ©."]}]},l:{t:"Ø¯Ø±Ø³ Û¶",s:[{t:"ğŸ¯",c:"â€¢ Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§"}]},e:[{s:"Das ist ___ CafÃ©.(Ù†ÙÛŒ)",o:["kein","keine","keinen","keiner"],c:0,h:"",x:"kein"},{s:"Wo ___ der Bahnhof?",o:["bin","bist","ist","sind"],c:2,h:"",x:"ist"}],ge:[{s:"ein CafÃ©â†’___(Ù†ÙÛŒ)",o:["kein","keine","keinen","nicht"],c:0,h:"",x:"kein"}]},
    7:{t:"Lektion 7",w:[{d:"der Beruf",f:"Ø´ØºÙ„"},{d:"der Arzt",f:"Ø¯Ú©ØªØ±"},{d:"der Lehrer",f:"Ù…Ø¹Ù„Ù…"},{d:"arbeiten",f:"Ú©Ø§Ø± Ú©Ø±Ø¯Ù†"},{d:"bei",f:"Ù†Ø²Ø¯"},{d:"als",f:"Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù†"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û·",s:[{t:"Ø´ØºÙ„",c:"",tb:"Ich bin <span class='highlight'>Arzt</span>. âœ…",ex:["Ich bin Ingenieur."]}]},l:{t:"Ø¯Ø±Ø³ Û·",s:[{t:"ğŸ¯",c:"â€¢ Ø´ØºÙ„â€ŒÙ‡Ø§"}]},e:[{s:"Ich bin ___.",o:["Arzt","ein Arzt","der Arzt","einen Arzt"],c:0,h:"",x:"Arzt"},{s:"Er arbeitet ___ BMW.",o:["in","bei","als","mit"],c:1,h:"",x:"bei"}],ge:[{s:"Lehrerâ†’die ___",o:["Lehrerin","Lehrerein","Lehrern","Lehrin"],c:0,h:"",x:"Lehrerin"}]},
    8:{t:"Lektion 8",w:[{d:"aufstehen",f:"Ø¨Ù„Ù†Ø¯ Ø´Ø¯Ù†"},{d:"frÃ¼hstÃ¼cken",f:"ØµØ¨Ø­Ø§Ù†Ù‡"},{d:"einkaufen",f:"Ø®Ø±ÛŒØ¯"},{d:"kochen",f:"Ø¢Ø´Ù¾Ø²ÛŒ"},{d:"schlafen",f:"Ø®ÙˆØ§Ø¨ÛŒØ¯Ù†"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û¸",s:[{t:"ÙØ¹Ù„ Ø¬Ø¯Ø§Ø´Ø¯Ù†ÛŒ",c:"",tb:"<span class='highlight'>auf</span>stehenâ†’ich <span class='highlight'>stehe</span>...<span class='highlight'>auf</span>",ex:["Ich stehe um 7 auf."]}]},l:{t:"Ø¯Ø±Ø³ Û¸",s:[{t:"ğŸ¯",c:"â€¢ ÙØ¹Ù„ Ø¬Ø¯Ø§Ø´Ø¯Ù†ÛŒ"}]},e:[{s:"Ich ___ um 7 ___.(aufstehen)",o:["stehe...auf","aufstehe","stehe...ein","kaufe...auf"],c:0,h:"",x:"stehe...auf"},{s:"7:30=___",o:["halb sieben","halb acht","sieben Uhr","acht Uhr"],c:1,h:"âš ï¸",x:"halb acht"}],ge:[{s:"aufstehenâ†’ich___",o:["stehe...auf","aufstehe","stehauf","steheauf"],c:0,h:"",x:"stehe...auf"}]},
    9:{t:"Lektion 9",w:[{d:"mÃ¶chten",f:"Ø®ÙˆØ§Ø³ØªÙ†"},{d:"essen",f:"Ø®ÙˆØ±Ø¯Ù†"},{d:"trinken",f:"Ù†ÙˆØ´ÛŒØ¯Ù†"},{d:"der Kaffee",f:"Ù‚Ù‡ÙˆÙ‡"},{d:"das Wasser",f:"Ø¢Ø¨"},{d:"lecker",f:"Ø®ÙˆØ´Ù…Ø²Ù‡"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û¹",s:[{t:"mÃ¶chten",c:"",tb:"ich <span class='highlight'>mÃ¶chte</span>\ndu <span class='highlight'>mÃ¶chtest</span>",ex:["Ich mÃ¶chte Kaffee."]}]},l:{t:"Ø¯Ø±Ø³ Û¹",s:[{t:"ğŸ¯",c:"â€¢ Ø³ÙØ§Ø±Ø´ ØºØ°Ø§"}]},e:[{s:"Ich ___ einen Kaffee.",o:["mÃ¶chte","mÃ¶chtest","mÃ¶chten","mÃ¶chtet"],c:0,h:"",x:"mÃ¶chte"},{s:"Was ___ du?(essen)",o:["esst","esse","isst","essen"],c:2,h:"",x:"isst"}],ge:[{s:"ich ___(mÃ¶chten)",o:["mÃ¶chte","mÃ¶chtest","mÃ¶chten","mÃ¶chtet"],c:0,h:"",x:"mÃ¶chte"}]},
    10:{t:"Lektion 10",w:[{d:"die U-Bahn",f:"Ù…ØªØ±Ùˆ"},{d:"der Bus",f:"Ø§ØªÙˆØ¨ÙˆØ³"},{d:"das Auto",f:"Ù…Ø§Ø´ÛŒÙ†"},{d:"fahren",f:"Ø±ÙØªÙ†"},{d:"einsteigen",f:"Ø³ÙˆØ§Ø± Ø´Ø¯Ù†"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û±Û°",s:[{t:"mit+Ø¯Ø§ØªÛŒÙˆ",c:"",tb:"mit <span class='highlight'>dem</span> Bus\nmit <span class='highlight'>der</span> U-Bahn",ex:["Ich fahre mit dem Bus."]}]},l:{t:"Ø¯Ø±Ø³ Û±Û°",s:[{t:"ğŸ¯",c:"â€¢ Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„"}]},e:[{s:"Ich ___ mit der U-Bahn.",o:["fahre","fÃ¤hrst","fÃ¤hrt","fahren"],c:0,h:"",x:"fahre"},{s:"mit ___ Bus",o:["der","dem","den","die"],c:1,h:"Ø¯Ø§ØªÛŒÙˆ",x:"dem"}],ge:[{s:"ich ___(fahren)",o:["fahre","fÃ¤hrst","fÃ¤hrt","fahren"],c:0,h:"",x:"fahre"}]},
    11:{t:"Lektion 11",w:[{d:"gemacht",f:"Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯Ù‡"},{d:"gekauft",f:"Ø®Ø±ÛŒØ¯Ù‡"},{d:"gegessen",f:"Ø®ÙˆØ±Ø¯Ù‡"},{d:"getrunken",f:"Ù†ÙˆØ´ÛŒØ¯Ù‡"},{d:"gefahren",f:"Ø±ÙØªÙ‡"},{d:"heute",f:"Ø§Ù…Ø±ÙˆØ²"},{d:"gestern",f:"Ø¯ÛŒØ±ÙˆØ²"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û±Û±",s:[{t:"Perfekt",c:"",tb:"Ich <span class='highlight'>habe</span> <span class='highlight'>getrunken</span>.\nSie <span class='highlight'>ist</span> <span class='highlight'>gefahren</span>.",ex:["Ich habe gelernt."]}]},l:{t:"Ø¯Ø±Ø³ Û±Û±",s:[{t:"ğŸ¯",c:"â€¢ Ø²Ù…Ø§Ù† Ú¯Ø°Ø´ØªÙ‡"}]},e:[{s:"Ich ___ Kaffee getrunken.",o:["habe","bin","hat","ist"],c:0,h:"",x:"habe"},{s:"Sie ___ gefahren.",o:["habe","hat","bin","ist"],c:3,h:"sein",x:"ist"},{s:"machenâ†’___",o:["gemacht","gemachen","gemakt","macht"],c:0,h:"",x:"gemacht"}],ge:[{s:"lernenâ†’___",o:["gelernt","gelearnt","lernt","gelarnt"],c:0,h:"",x:"gelernt"}]},
    12:{t:"Lektion 12",w:[{d:"passieren",f:"Ø§ØªÙØ§Ù‚ Ø§ÙØªØ§Ø¯Ù†"},{d:"der Kopf",f:"Ø³Ø±"},{d:"das Fieber",f:"ØªØ¨"},{d:"krank",f:"Ù…Ø±ÛŒØ¶"},{d:"wehtun",f:"Ø¯Ø±Ø¯ Ú©Ø±Ø¯Ù†"},{d:"mÃ¼ssen",f:"Ø¨Ø§ÛŒØ¯"},{d:"die Medizin",f:"Ø¯Ø§Ø±Ùˆ"}],g:{t:"Ú¯Ø±Ø§Ù…Ø± Û±Û²",s:[{t:"mÃ¼ssen",c:"",tb:"ich <span class='highlight'>muss</span>\ndu <span class='highlight'>musst</span>",ex:["Ich muss zum Arzt."]}]},l:{t:"Ø¯Ø±Ø³ Û±Û²",s:[{t:"ğŸ¯",c:"â€¢ Ø¨ÛŒÙ…Ø§Ø±ÛŒ"}]},e:[{s:"Mein Kopf ___ weh.",o:["tut","tust","macht","hat"],c:0,h:"",x:"tut"},{s:"Ich ___ zum Arzt.",o:["mÃ¼ssen","muss","musst","mÃ¼sst"],c:1,h:"",x:"muss"}],ge:[{s:"ich ___(mÃ¼ssen)",o:["muss","musst","mÃ¼ssen","mÃ¼sst"],c:0,h:"",x:"muss"}]}
    };

    let cL=1,cQ=[],cI=0,qS=0,cCI=0,cF=false;
    let tS=parseInt(localStorage.getItem('ms'))||0;
    let st=parseInt(localStorage.getItem('mt'))||0;
    let settings=JSON.parse(localStorage.getItem('appSettings'))||{hints:true,autoNext:false};
    let dataLoaded=false;

    function showToast(m){var t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(function(){t.classList.remove('show')},2500);}
    function trackDay(){var d=JSON.parse(localStorage.getItem('activeDays'))||[];var t=new Date().toISOString().split('T')[0];if(d.indexOf(t)===-1){d.push(t);localStorage.setItem('activeDays',JSON.stringify(d));}}
    function getActiveDays(){return(JSON.parse(localStorage.getItem('activeDays'))||[]).length;}
    trackDay();

    function updateScoreUI(){document.getElementById('totalScore').textContent=tS;document.getElementById('streak').textContent=st;var l='Ù…Ø¨ØªØ¯ÛŒ';if(tS>=500)l='â­ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ';else if(tS>=300)l='ğŸ¥‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡';else if(tS>=150)l='ğŸ¥ˆ Ù…ØªÙˆØ³Ø·';else if(tS>=50)l='ğŸ¥‰ Ù…Ø¨ØªØ¯ÛŒ+';document.getElementById('levelBadge').textContent=l;localStorage.setItem('ms',tS);localStorage.setItem('mt',st);}

    function switchTab(name,btn){document.querySelectorAll('.tab-btn').forEach(function(t){t.classList.remove('active')});document.querySelectorAll('.tab-page').forEach(function(p){p.classList.remove('active')});btn.classList.add('active');document.getElementById('page'+name).classList.add('active');if(name==='Home'){document.getElementById('headerTitle').textContent='ğŸ“š Menschen A1.1';document.getElementById('headerSub').textContent='Ø¢Ù…ÙˆØ²Ø´ Ø²Ø¨Ø§Ù† Ø¢Ù„Ù…Ø§Ù†ÛŒ';}else if(name==='Leaderboard'){document.getElementById('headerTitle').textContent='ğŸ† Ø±ØªØ¨Ù‡â€ŒØ¨Ù†Ø¯ÛŒ';document.getElementById('headerSub').textContent='Ø±Ù‚Ø§Ø¨Øª Ø¨Ø§ Ø¯ÛŒÚ¯Ø±Ø§Ù†';loadLeaderboard();}else if(name==='Profile'){document.getElementById('headerTitle').textContent='ğŸ‘¤ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ';document.getElementById('headerSub').textContent='Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø´Ù…Ø§';updateProfileUI();}else if(name==='Settings'){document.getElementById('headerTitle').textContent='âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª';document.getElementById('headerSub').textContent='Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ';updateSettingsUI();}}

    function googleSignIn(){if(!firebaseReady){showToast('âš ï¸ Firebase ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡');return;}var provider=new firebase.auth.GoogleAuthProvider();auth.signInWithRedirect(provider);}
    function googleSignOut(){if(auth){auth.signOut().then(function(){currentUser=null;dataLoaded=false;showToast('ğŸ‘‹ Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯');updateProfileUI();});}}

    function loadUserFromFirestore(){if(!firebaseReady||!currentUser)return;db.collection('users').doc(currentUser.uid).get().then(function(doc){if(doc.exists){var data=doc.data();if((data.score||0)>tS)tS=data.score;if((data.streak||0)>st)st=data.streak;localStorage.setItem('ms',tS);localStorage.setItem('mt',st);updateScoreUI();updateProfileUI();}dataLoaded=true;syncUserToFirestore();}).catch(function(){dataLoaded=true;syncUserToFirestore();});}

    function syncUserToFirestore(){if(!firebaseReady||!currentUser||!dataLoaded)return;db.collection('users').doc(currentUser.uid).set({displayName:currentUser.displayName||'Ú©Ø§Ø±Ø¨Ø±',photoURL:currentUser.photoURL||'',email:currentUser.email||'',score:tS,streak:st,level:tS>=500?'A1+':tS>=300?'A1':'A1.1',lastActive:firebase.firestore.FieldValue.serverTimestamp(),activeDays:getActiveDays(),updatedAt:firebase.firestore.FieldValue.serverTimestamp()},{merge:true}).catch(function(e){console.warn(e);});}
    function updateScoreOnline(){updateScoreUI();syncUserToFirestore();}

    if(firebaseReady){auth.getRedirectResult().then(function(result){if(result&&result.user){currentUser=result.user;showToast('âœ… Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ '+(result.user.displayName||''));loadUserFromFirestore();updateProfileUI();}}).catch(function(e){console.warn(e);});auth.onAuthStateChanged(function(user){currentUser=user;if(user){loadUserFromFirestore();document.getElementById('connStatus').textContent='ğŸŸ¢ Ù…ØªØµÙ„';}else{dataLoaded=false;document.getElementById('connStatus').textContent='ğŸ”´ Ø¢ÙÙ„Ø§ÛŒÙ†';}updateProfileUI();});}

    function loadLeaderboard(){if(!firebaseReady){document.getElementById('lbList').innerHTML='<div class="loading-spinner"><p>âš ï¸ Firebase ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡</p></div>';document.getElementById('podiumArea').innerHTML='';document.getElementById('onlineCount').textContent='Ø¢ÙÙ„Ø§ÛŒÙ†';return;}document.getElementById('lbList').innerHTML='<div class="loading-spinner"><p>â³ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p></div>';db.collection('users').orderBy('score','desc').limit(50).get().then(function(snapshot){var users=[];snapshot.forEach(function(doc){users.push(Object.assign({id:doc.id},doc.data()));});renderLeaderboard(users);}).catch(function(){document.getElementById('lbList').innerHTML='<div class="loading-spinner"><p>âŒ Ø®Ø·Ø§</p></div>';});var fiveMinAgo=new Date(Date.now()-5*60*1000);db.collection('users').where('lastActive','>',fiveMinAgo).get().then(function(snap){document.getElementById('onlineCount').textContent=snap.size+' Ù†ÙØ± Ø¢Ù†Ù„Ø§ÛŒÙ†';}).catch(function(){});}

    function renderLeaderboard(users){if(!users||users.length===0){document.getElementById('podiumArea').innerHTML='';document.getElementById('lbList').innerHTML='<div class="loading-spinner"><p>Ø®Ø§Ù„ÛŒ</p></div>';return;}var top3=users.slice(0,3);var medals=['ğŸ¥ˆ','ğŸ¥‡','ğŸ¥‰'];var classes=['second','first','third'];var order=[1,0,2];var ph='<div class="podium">';order.forEach(function(idx,dIdx){var u=top3[idx];if(!u)return;var isMe=currentUser&&u.id===currentUser.uid;var name=u.displayName||'Ú©Ø§Ø±Ø¨Ø±';var av=u.photoURL?'<img src="'+u.photoURL+'" alt="">':name.charAt(0);ph+='<div class="podium-item '+classes[dIdx]+'"><div class="podium-avatar">'+av+'<div class="podium-medal">'+medals[idx]+'</div></div><div class="podium-name">'+(isMe?'Ø´Ù…Ø§':name.split(' ')[0])+'</div><div class="podium-score-text">'+(u.score||0)+' â­</div><div class="podium-bar"><span class="podium-rank">'+(idx+1)+'</span></div></div>';});ph+='</div>';document.getElementById('podiumArea').innerHTML=ph;var lh='';users.forEach(function(u,i){if(i<3)return;var isMe=currentUser&&u.id===currentUser.uid;var name=u.displayName||'Ú©Ø§Ø±Ø¨Ø±';var av=u.photoURL?'<img src="'+u.photoURL+'" alt="">':'<span>'+name.charAt(0)+'</span>';lh+='<div class="lb-item '+(isMe?'is-me':'')+'"><div class="lb-rank">'+(i+1)+'</div><div class="lb-avatar-sm">'+av+'</div><div class="lb-info"><div class="lb-name">'+(isMe?'<span class="me-badge">Ø´Ù…Ø§</span>':'')+name+'</div><div class="lb-details">ğŸ”¥'+(u.streak||0)+'</div></div><div class="lb-score"><div class="lb-score-val">'+(u.score||0)+'</div><div class="lb-score-label">Ø§Ù…ØªÛŒØ§Ø²</div></div></div>';});document.getElementById('lbList').innerHTML=lh||'<div class="loading-spinner"><p>Ø®Ø§Ù„ÛŒ</p></div>';}

    function updateProfileUI(){if(currentUser){document.getElementById('authPrompt').style.display='none';document.getElementById('profileContent').style.display='block';document.getElementById('profileName').textContent=currentUser.displayName||'Ú©Ø§Ø±Ø¨Ø±';document.getElementById('profileEmail').textContent=currentUser.email||'';var av=document.getElementById('profileAvatar');if(currentUser.photoURL){av.innerHTML='<img src="'+currentUser.photoURL+'" alt="">';}else{av.innerHTML='<span class="avatar-letter">'+(currentUser.displayName||'U').charAt(0)+'</span>';}document.getElementById('pStatScore').textContent=tS;document.getElementById('pStatStreak').textContent=st;document.getElementById('pStatDays').textContent=getActiveDays();if(firebaseReady){db.collection('users').where('score','>',tS).get().then(function(snap){document.getElementById('pStatRank').textContent='#'+(snap.size+1);}).catch(function(){document.getElementById('pStatRank').textContent='-';});}}else{document.getElementById('authPrompt').style.display='block';document.getElementById('profileContent').style.display='none';}}

    function hideHomeContent(){document.getElementById('mainMenu').style.display='none';document.getElementById('subMenu').classList.remove('show');document.getElementById('subMenuBack').style.display='none';['wordsArea','grammarArea','lessonArea'].forEach(function(id){document.getElementById(id).classList.remove('show')});document.getElementById('quizArea').style.display='none';document.getElementById('resultCard').style.display='none';}
    function goHome(){hideHomeContent();document.getElementById('mainMenu').style.display='block';document.getElementById('headerTitle').textContent='ğŸ“š Menschen A1.1';document.getElementById('headerSub').textContent='Ø¢Ù…ÙˆØ²Ø´ Ø²Ø¨Ø§Ù† Ø¢Ù„Ù…Ø§Ù†ÛŒ';updateScoreUI();}
    function openLektion(n){cL=n;hideHomeContent();document.getElementById('subMenu').classList.add('show');document.getElementById('subMenuBack').style.display='block';document.getElementById('headerTitle').textContent='ğŸ“š '+L[n].t;document.getElementById('headerSub').textContent='Ø¨Ø®Ø´ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†';}
    function backToSubMenu(){hideHomeContent();document.getElementById('subMenu').classList.add('show');document.getElementById('subMenuBack').style.display='block';}
    function showSection(t){hideHomeContent();var l=L[cL];if(t==='words')sW(l);else if(t==='grammar')sG(l);else if(t==='lesson')sL(l);else if(t==='exercise')sEM(l);}

    function sW(l){var a=document.getElementById('wordsArea');var h='<div class="card liquid-glass-lg"><h2>ğŸ“ ÙˆØ§Ú˜Ù‡â€ŒÙ‡Ø§</h2><div class="flashcard" onclick="fWC()"><div class="word" id="wW"></div><div class="meaning" id="wM"></div><div class="tap-hint" id="wH">ğŸ‘† Ù„Ù…Ø³ Ú©Ù†</div></div><div class="fc-counter" id="wC"></div><div class="fc-nav"><button onclick="pWC()">â¬…ï¸</button><button onclick="nWC()">â¡ï¸</button></div></div>';h+='<div class="card liquid-glass-lg"><h2>ğŸ“‹ Ù„ÛŒØ³Øª</h2><table class="word-table"><tr><th>Ø¢Ù„Ù…Ø§Ù†ÛŒ</th><th>ÙØ§Ø±Ø³ÛŒ</th></tr>';l.w.forEach(function(w){h+='<tr><td class="de">'+w.d+'</td><td class="fa">'+w.f+'</td></tr>';});h+='</table></div><button class="back-btn" onclick="backToSubMenu()">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>';a.innerHTML=h;a.classList.add('show');cCI=0;dWC(l);}
    function dWC(l){if(!l)l=L[cL];var w=l.w[cCI];document.getElementById('wW').textContent=w.d;document.getElementById('wM').textContent=w.f;document.getElementById('wM').style.display='none';document.getElementById('wH').style.display='block';document.getElementById('wC').textContent=(cCI+1)+' / '+l.w.length;cF=false;}
    function fWC(){var m=document.getElementById('wM'),h=document.getElementById('wH');if(!cF){m.style.display='block';h.style.display='none';cF=true;}else{m.style.display='none';h.style.display='block';cF=false;}}
    function nWC(){cCI=(cCI+1)%L[cL].w.length;dWC(L[cL]);}
    function pWC(){cCI=(cCI-1+L[cL].w.length)%L[cL].w.length;dWC(L[cL]);}

    function sG(l){var a=document.getElementById('grammarArea');var h='';l.g.s.forEach(function(s){h+='<div class="card liquid-glass-lg"><h3>'+s.t+'</h3>';if(s.c)h+='<p>'+s.c+'</p>';h+='<div class="grammar-box">'+s.tb.replace(/\n/g,'<br>')+'</div>';if(s.ex){h+='<h3>Ù…Ø«Ø§Ù„:</h3><ul>';s.ex.forEach(function(e){h+='<li>'+e+'</li>';});h+='</ul>';}h+='</div>';});h+='<button class="back-btn" onclick="backToSubMenu()">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>';a.innerHTML=h;a.classList.add('show');}
    function sL(l){var a=document.getElementById('lessonArea');var h='';l.l.s.forEach(function(s){h+='<div class="card liquid-glass-lg"><h3>'+s.t+'</h3><p style="white-space:pre-line">'+s.c+'</p></div>';});h+='<button class="back-btn" onclick="backToSubMenu()">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>';a.innerHTML=h;a.classList.add('show');}

    function sEM(l){var a=document.getElementById('wordsArea');var h='<div class="card liquid-glass-lg"><h2>âœï¸ ØªÙ…Ø±ÛŒÙ†</h2></div><div class="sub-menu show" style="display:grid"><div class="sub-btn liquid-glass" onclick="sE(\'m\')"><span class="sicon">âœï¸</span><span>ØªÙ…Ø±ÛŒÙ† Ø¯Ø±Ø³</span></div><div class="sub-btn liquid-glass" onclick="sE(\'g\')"><span class="sicon">ğŸ“</span><span>Ú¯Ø±Ø§Ù…Ø±</span></div><div class="sub-btn liquid-glass" onclick="sE(\'w\')"><span class="sicon">ğŸ”¤</span><span>Ù„ØºØ§Øª</span></div><div class="sub-btn liquid-glass" onclick="sE(\'a\')"><span class="sicon">ğŸ¯</span><span>Ø¢Ø²Ù…ÙˆÙ†</span></div></div><button class="back-btn" onclick="backToSubMenu()">â¬…ï¸ Ø¨Ø§Ø²Ú¯Ø´Øª</button>';a.innerHTML=h;a.classList.add('show');}

    function sE(t){hideHomeContent();var l=L[cL];var q=[];if(t==='m')q=l.e.slice();else if(t==='g')q=(l.ge||[]).slice();else if(t==='w'){var w=l.w.slice().sort(function(){return Math.random()-0.5}).slice(0,6);w.forEach(function(wi){var o=[wi.f];while(o.length<4){var r=l.w[Math.floor(Math.random()*l.w.length)].f;if(o.indexOf(r)===-1)o.push(r);}o.sort(function(){return Math.random()-0.5});q.push({s:wi.d+' = ___',o:o,c:o.indexOf(wi.f),h:'Ù…Ø¹Ù†ÛŒ',x:wi.d+'='+wi.f});});}else q=l.e.concat(l.ge||[]).sort(function(){return Math.random()-0.5});cQ=q.sort(function(){return Math.random()-0.5});cI=0;qS=0;document.getElementById('quizArea').style.display='block';sQ();}

    function sQ(){if(cI>=cQ.length){sR();return;}var q=cQ[cI];document.getElementById('progressFill').style.width=(cI/cQ.length*100)+'%';document.getElementById('questionNumber').textContent='Ø³Ø¤Ø§Ù„ '+(cI+1)+' Ø§Ø² '+cQ.length;document.getElementById('questionText').textContent='Ø¬Ø§ÛŒ Ø®Ø§Ù„ÛŒ Ø±Ùˆ Ù¾Ø± Ú©Ù†:';document.getElementById('questionSentence').innerHTML=q.s.replace('___','<span class="blank">______</span>');document.getElementById('questionHint').textContent=settings.hints&&q.h?'ğŸ’¡ '+q.h:'';var c=document.getElementById('optionsContainer');c.innerHTML='';q.o.forEach(function(o,i){var b=document.createElement('button');b.className='option-btn';b.textContent=o;b.onclick=function(){cA(i,b)};c.appendChild(b);});document.getElementById('explanation').classList.remove('show');document.getElementById('nextBtn').classList.remove('show');}

    function cA(s,b){var q=cQ[cI];var bs=document.querySelectorAll('.option-btn');bs.forEach(function(b){b.disabled=true});if(s===q.c){b.classList.add('correct');qS++;tS+=10;st++;}else{b.classList.add('wrong');bs[q.c].classList.add('correct');st=0;}document.getElementById('explanation').innerHTML='ğŸ“š '+q.x;document.getElementById('explanation').classList.add('show');document.getElementById('nextBtn').classList.add('show');updateScoreOnline();if(settings.autoNext)setTimeout(function(){nextQuestion()},1500);}
    function nextQuestion(){cI++;sQ();}

    function sR(){document.getElementById('quizArea').style.display='none';document.getElementById('resultCard').style.display='block';var p=Math.round(qS/cQ.length*100);var e,t,x;if(p===100){e='ğŸ†';t='Ø¹Ø§Ù„ÛŒ!';x='Ø¨ÛŒâ€ŒÙ†Ù‚Øµ!';}else if(p>=80){e='ğŸŒŸ';t='Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨!';x='Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ø¯Ù‡!';}else if(p>=60){e='ğŸ‘';t='Ø®ÙˆØ¨ Ø¨ÙˆØ¯!';x='ØªÙ…Ø±ÛŒÙ† Ú©Ù†!';}else{e='ğŸ’ª';t='Ù†Ø§Ø§Ù…ÛŒØ¯ Ù†Ø´Ùˆ!';x='Ø¯Ø±Ø³ Ø±Ùˆ Ø¨Ø®ÙˆÙ†!';}document.getElementById('resultEmoji').textContent=e;document.getElementById('resultTitle').textContent=t;document.getElementById('resultScore').textContent=qS+' Ø§Ø² '+cQ.length;document.getElementById('resultText').textContent=x;syncUserToFirestore();}

    function updateSettingsUI(){var isDark=!document.body.classList.contains('light-mode');document.getElementById('themeToggle').classList.toggle('active',isDark);document.getElementById('hintToggle').classList.toggle('active',settings.hints);document.getElementById('autoNextToggle').classList.toggle('active',settings.autoNext);}
    function toggleTheme(){document.body.classList.toggle('light-mode');localStorage.setItem('theme',document.body.classList.contains('light-mode')?'light':'dark');updateSettingsUI();showToast(document.body.classList.contains('light-mode')?'â˜€ï¸ Ø±ÙˆØ´Ù†':'ğŸŒ™ ØªØ§Ø±ÛŒÚ©');}
    function toggleHints(){settings.hints=!settings.hints;localStorage.setItem('appSettings',JSON.stringify(settings));updateSettingsUI();}
    function toggleAutoNext(){settings.autoNext=!settings.autoNext;localStorage.setItem('appSettings',JSON.stringify(settings));updateSettingsUI();}
    function resetProgress(){if(confirm('Ù¾Ø§Ú© Ø¨Ø´Ù‡ØŸ')){localStorage.removeItem('ms');localStorage.removeItem('mt');localStorage.removeItem('activeDays');tS=0;st=0;updateScoreUI();syncUserToFirestore();showToast('ğŸ—‘ï¸ Ù¾Ø§Ú© Ø´Ø¯!');goHome();}}
    function loadTheme(){if(localStorage.getItem('theme')==='light')document.body.classList.add('light-mode');}

    function buildList(){var li=document.getElementById('lektionList');var h='';lektionInfo.forEach(function(l){h+='<div class="lektion-btn liquid-glass" onclick="openLektion('+l.num+')"><span class="icon">'+l.icon+'</span><div class="info"><div class="title">'+l.title+'</div><div class="subtitle">'+l.subtitle+'</div></div><span class="arrow">â†</span></div>';});li.innerHTML=h;}

    setInterval(function(){if(currentUser&&dataLoaded)syncUserToFirestore();},60000);

    loadTheme();
    buildList();
    updateScoreUI();
</script>
</body>
</html>